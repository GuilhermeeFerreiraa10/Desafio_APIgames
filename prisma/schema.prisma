generator client {
  provider = "prisma-client"
  output   = "./generated/client"
}

datasource db {
  provider = "postgresql"
}

model Student {
  id String @id @default(uuid())
  nanme String @db.VarChar(120)
  email String @unique @db.Char(60)
  password String
  dtBirth DateTime? @db.Date @map("dt_birth")
  formed Boolean @default(false)

  dtCreate DateTime @map("dt_create") @default(now())
  dtUptade DateTime @map("dt_uptade") @updatedAt

  adress Adress?
  reviews Assessment[]
  registration Registration[]

  @@map("student")
}

model Adress {
  id String @id @default(uuid())
  road String @db.VarChar(30)
  neighborhood String @db.VarChar(30)
  number Int
  city String @db.VarChar(50)

  idStudent String @unique
  student Student @relation(fields: [idStudent],references: [id])

  @@map("adress")
}

model Assessment {
  id String @id @default(uuid())
  Discipline String @db.VarChar(30)
  notice Int @db.SmallInt
  dtAssessment DateTime @default(now()) @map("dt_assessment")

  idStudent String @map("id_student")
  student Student @relation(fields: [idStudent], references: [id])

  @@map("update")
}

model Course {
  id String @id @default(uuid())
  title String
  ementa String
  hourlyLoad Decimal
  maxStudents Int @default(30) @db.SmallInt @map("max_alunos")
  status String

  dtCreate DateTime @map("dt_create") @default(now())
  dtUptade DateTime @map("dt_uptade") @updatedAt

  registration Registration[]

  @@map("course")
}

model Registration {
  idStudent String @map("id_student")
  idCourse String @map("id_course") 
  dtRegistration DateTime @default(now()) @map("dt_registration")

  student Student @relation(fields: [idStudent], references: [id])
  course Course @relation(fields: [idCourse], references: [id])

  @@id([idStudent, idCourse])
  @@map("registration")
}

model Material {
  id Int @id @default(autoincrement())
  title String
  discription String
  link String
  avaliable String

  dtCreate DateTime @map("dt_create") @default(now())
  dtUptade DateTime @map("dt_uptade") @updatedAt

  @@map("material")
}
